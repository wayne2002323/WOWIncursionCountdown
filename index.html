<html> 
<head> 
<script type='text/javascript' src='http://www.google.com/jsapi'></script>
<script
  src="https://code.jquery.com/jquery-1.12.4.js"
  integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU="
  crossorigin="anonymous"></script>
<script src='jquery.timers.js' type='text/javascript'></script>
<script type='text/javascript'>
  var firstDate = new Date('2019/1/11 05:00');
  var thisDate = new Date();

  var hours = Math.abs(thisDate - firstDate) / 36e5;

  var nexttimes = parseInt((parseInt(hours) / 19))+1;
  var nextDate = new Date(firstDate.setHours(firstDate.getHours()+ nexttimes*19));

  var arrayindex = parseInt((parseInt(hours) / 19) % 6) ;
  var spantime = (nextDate - thisDate)/1000;
  var spantime2 = 0;
  var eventarray=['組達薩','提拉加德海灣','納茲米爾',',斯陀宋恩谷地','沃魯敦','佐斯瓦'];

  $(document).ready(function () {
    set()
  });

  function set(){
      $(this).everyTime('1s', function(i) {
       spantime --;
       spantime2 --;
       var d = Math.floor(spantime / (24 * 3600));
       var h = Math.floor((spantime % (24 * 3600)) / 3600);
       var m = Math.floor((spantime % 3600) / (60));
       var s = Math.floor(spantime % 60);

       var b_d = Math.floor(spantime2 / (24 * 3600));
       var b_h = Math.floor((spantime2 % (24 * 3600)) / 3600);
       var b_m = Math.floor((spantime2 % 3600) / (60));
       var b_s = Math.floor(spantime2 % 60);

      if (spantime > 0) {
        var hh = h + (d*24);
        var mm = m;
        var ss = s;
        var strTime =  hh + ":" + mm + ":" + ss;

        var b_hh = b_h + (b_d*24);
        var b_mm = b_m;
        var b_ss = b_s;
        var b_strTime =  b_hh + ":" + b_mm + ":" + b_ss;

        var nowindex = arrayindex == 0 ? 5 : arrayindex-1;
        b_strTime = spantime2 < 0 ? '已結束' : b_strTime;

        $('#place').html('目前在=>'+eventarray[nowindex]);
        $('#times').html('目前剩=>'+b_strTime);

        $('#NEXTplace').html('下一次=>'+eventarray[arrayindex]);
        $('#NEXTtimes').html('剩下=>'+strTime);
      } else { 
        $('#place').html('');
        $('#times').html('');
        $('#NEXTplace').html('');
        $('#NEXTtimes').html('');
        next();
      }
    });
  }
  function next(){
     spantime = 19 * 60 * 60;
     spantime2 = 6 * 60 * 60;
     arrayindex = arrayindex +1;
  }
  function UTCtoGMT8(utctime) {
    var dt = new Date(utctime);
    if (utctime == undefined) {
        dt = new Date();
    }
    var date = [
        [dt.getFullYear(), dt.getMonth() + 1, dt.getDate()].join('-'),
        [dt.getHours(), dt.getMinutes(), dt.getSeconds()].join(':')
    ].join(' ').replace(/(?=\b\d\b)/g, '0');
    return date;
}
</script>

<div id="NEXTplace"></div>
<div id="NEXTtimes"></div>
<div id="place"></div>
<div id="times"></div>
</body> 
</html>
